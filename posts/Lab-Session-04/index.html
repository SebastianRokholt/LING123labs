<!DOCTYPE html><html lang="en-US" mode="light" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="pv-cache-enabled" content="false"><meta name="generator" content="Jekyll v4.2.0" /><meta property="og:title" content="Lab Session 04" /><meta name="author" content="Sebastian Einar Røkholt" /><meta property="og:locale" content="en_US" /><meta name="description" content="This website contains exercises and other educational resources for LING123: Language and Computers. The course is available for students at the University of Bergen, and is held at the Institute of Department of Linguistic, Literary and Aesthetic Studies." /><meta property="og:description" content="This website contains exercises and other educational resources for LING123: Language and Computers. The course is available for students at the University of Bergen, and is held at the Institute of Department of Linguistic, Literary and Aesthetic Studies." /><link rel="canonical" href="https://ling123labs.com/posts/Lab-Session-04/" /><meta property="og:url" content="https://ling123labs.com/posts/Lab-Session-04/" /><meta property="og:site_name" content="LING123 Lab Sessions" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-02-10T11:34:00+01:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Lab Session 04" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"author":{"@type":"Person","name":"Sebastian Einar Røkholt"},"headline":"Lab Session 04","dateModified":"2021-03-10T10:32:05+01:00","datePublished":"2021-02-10T11:34:00+01:00","description":"This website contains exercises and other educational resources for LING123: Language and Computers. The course is available for students at the University of Bergen, and is held at the Institute of Department of Linguistic, Literary and Aesthetic Studies.","url":"https://ling123labs.com/posts/Lab-Session-04/","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://ling123labs.com/posts/Lab-Session-04/"},"@context":"https://schema.org"}</script><title>Lab Session 04 | LING123 Lab Sessions</title><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="https://www.uib.no/sites/w3.uib.no/files/styles/large/public/w2/ui/uib_logo_1.jpg?itok=LjwYKlGn" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">LING123 Lab Sessions</a></div><div class="site-subtitle font-italic">Educational rescources for the LING123 lab sessions, <br>spring 2021</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://www.linkedin.com/in/sebastianrokholt/" aria-label="linkedin" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <a href="https://github.com/SebastianRokholt" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['sebastian.rokholt','student.uib.no'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>Lab Session 04</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Lab Session 04</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Wed, Feb 10, 2021, 11:34 AM +0100" > Feb 10 <i class="unloaded">2021-02-10T11:34:00+01:00</i> </span> by <span class="author"> Sebastian Einar Røkholt </span></div><div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Wed, Mar 10, 2021, 10:32 AM +0100" > Mar 10 <i class="unloaded">2021-03-10T10:32:05+01:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2169 words">12 min</span></div></div><div class="post-content"><p><br /></p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/awk-logo.png" alt="AWK Logo" height="150" class="left" /></p><h4 id="welcome-to-lab-session-4--an-introduction-to-awk-">Welcome to Lab Session 4: An Introduction to AWK <br /></h4><p>For this lab session we’re getting started with the AWK programming language! <br /></p><p>The lecture notes for lecture 4 can be found <a href="https://lingkurs.h.uib.no/webroot/index.php?page=scripting/countcolumns&amp;lang=en&amp;course=ling123">here</a>. <br /></p><p><br />You should complete the exercises from <a href="https://sebastianrokholt.github.io/LING123labs/posts/Lab-Session-03/">Lab Session 03</a> if you haven’t done so already. If you only complete Part 1 and 2 of Lab Session 03, that’s fine for now. It’s also OK to wait with Part 3, and instead do those exercises as exam preparations. <br /></p><hr /><h2 id="an-introduction-to-language-processing-with-awk-">An Introduction to Language Processing with <em>AWK</em> <br /></h2><h3 id="what-is-awk-">What is AWK? <br /></h3><p>AWK is a data-driven programming language designed for text processing and data extraction. It has a simple syntax and is easy to learn, at least compared to other programming languages. Despite the fact that AWK is more than 40 years old, it is loved by system engineers, language researchers, software developers and data scientists because it makes a lot of complicated text processing operations very easy to do in just a few lines of code. <br /></p><p>When talking about the AWK programming language, we use capital letters - AWK. When talking about the Unix command, we use lower case letters - <code class="language-plaintext highlighter-rouge">awk</code>. The <code class="language-plaintext highlighter-rouge">awk</code> command takes AWK code as input. Keep in mind that most of what we’ll be doing today will also work in GNU AWK, known as <code class="language-plaintext highlighter-rouge">gawk</code>. <code class="language-plaintext highlighter-rouge">gawk</code> has some additional functionality which I will not go into here, but know that you can try to use <code class="language-plaintext highlighter-rouge">gawk</code> instead of <code class="language-plaintext highlighter-rouge">awk</code> if something doesn’t work properly for you. <code class="language-plaintext highlighter-rouge">gawk</code> first, Google later! <br /></p><p>If you already know some programming, you’ll find many things in AWK familiar. This is especially the case if you are familiar with other dynamically typed languages such as Python or Javascript. Keep in mind that there are a few significant differences as well, but regardless, you should be able to pick it up quite quickly. <br /></p><p>If you’re new to programming, AWK might seem a bit overwhelming at first. However, AWK is a great first programming language to learn, because it is quite forgiving and pretty easy to get started with, even compared to languages like Python or Javascript.</p><p>The general syntax of AWK is like this:</p><pre><code class="language-AWK">awk 'PATTERN { ACTION }' FILENAME
</code></pre><p><code class="language-plaintext highlighter-rouge">awk</code> tells the shell to execute the code with the <code class="language-plaintext highlighter-rouge">awk</code> program. <code class="language-plaintext highlighter-rouge">PATTERN</code> can be any pattern such as a regular or logical expression, which tells <code class="language-plaintext highlighter-rouge">awk</code> which lines or string sequence to perform the action on. The pattern can also be left empty. <code class="language-plaintext highlighter-rouge">ACTION</code> denotes the action or series of actions to perform on the (matched) input. <code class="language-plaintext highlighter-rouge">FILENAME</code> is just the name of the file to be used as input. We can also pipe / direct input from other UNIX commands, just like every other command we’ve gone through thus far in the course.</p><p>In other words, <code class="language-plaintext highlighter-rouge">awk</code> loops over the input file line by line, and executes the specified action on the matched lines/words/characters.<br /></p><p>Here’s an example. I have a simple file called <code class="language-plaintext highlighter-rouge">wages.txt</code> which contains information about the employees in my small business. It has fields (columns) for the employee’s names, hourly wage and the amount of hours they have worked this month.</p><div class="language-text highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre>Arne 182 0
Marie 190 0
Vishal 213 150
Grete 192 16
Finn 192 37
Kari 220 145
Arnfinn 220 150
Torstein 250 132
Trude 196 150
Geir 160 13
Hoda 196 42
</pre></table></code></div></div><p>I want to compute the monthly salary for each employee, but only the ones who have worked more than 0 hours. This is easily done with <code class="language-plaintext highlighter-rouge">awk</code>: <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/lab-post-04/awk-compute-monthly-wage.png" alt="Computing monthly wages with awk" class="normal" /> <em>Computing the monthly wage with awk</em></p><p>Now, I dare those of you who know Python or Java or most any other programming language to achieve the same thing in a single line of code! This example shows a glimpse of just how elegant AWK can be. <br /></p><p>Let’s dive in to the specifics. <br /></p><h3 id="fields-and-field-separators">Fields and field separators</h3><p>I mentioned that <code class="language-plaintext highlighter-rouge">awk</code> loops over the input line by line. What makes <code class="language-plaintext highlighter-rouge">awk</code> really handy, is that it partitions/separates the input lines into different <em>fields</em>. These fields can be referenced in the code by using the dollar sign <code class="language-plaintext highlighter-rouge">$</code> and the field number. Like this: <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/lab-post-04/print-field-1.png" alt="Printing the first field with awk" class="normal" /> <em>Printing the first input field with awk</em></p><p><a id="new-FS"></a></p><p>You can also print the whole line with $0, the second field with $2, the third field with $3, and so on. The default field separator is set to space, but can easily be changed by specifying a new one with the <code class="language-plaintext highlighter-rouge">-F</code> option: <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/lab-post-04/new-field-separator.png" alt="Setting the field separator" class="normal" /> <em>Setting a new field separator</em> <br /></p><h3 id="patterns">Patterns</h3><p>If we only want to match the lines according to some logical or regular expression, we enter a pattern before the curly braces which denote the action. This means that the action will only be performed on the lines matching the pattern.</p><p>If I only want to print the names of the employees who have an hourly wage over 200.-, I can specify a pattern with a logical comparison like this: <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/lab-post-04/logical-comparison-pattern.png" alt="Logical comparison as pattern" class="normal" /></p><p>Or I can specify a regular expression by enclosing it in slashes, like this: <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/lab-post-04/regular-expression-as-pattern.png" alt="Regular expression as pattern" class="normal" /> <br /></p><h3 id="actions">Actions</h3><p>There are a LOT of different stuff you can do with the matched input. You can write one-liners or looooong scripts/programs with AWK. Here’s just a few examples of techniques/tools/possibilities you can use when writing AWK code:</p><ul><li>Create and assign <a href="https://linuxhint.com/awk_command_variables/">variables</a> with <code class="language-plaintext highlighter-rouge">=</code><li>Mathematical expressions with mathematical operators, such as addition <code class="language-plaintext highlighter-rouge">+</code>, subtraction <code class="language-plaintext highlighter-rouge">-</code>, multiplication <code class="language-plaintext highlighter-rouge">*</code>, division <code class="language-plaintext highlighter-rouge">/</code>, exponents <code class="language-plaintext highlighter-rouge">^</code> and modulus <code class="language-plaintext highlighter-rouge">&amp;</code><li>Use logical operators such as “AND” <code class="language-plaintext highlighter-rouge">&amp;&amp;</code>, “OR” <code class="language-plaintext highlighter-rouge">||</code>, “NOT” <code class="language-plaintext highlighter-rouge">!</code>, “EQUALS” <code class="language-plaintext highlighter-rouge">==</code>, and “GREATER OR EQUAL THAN” <code class="language-plaintext highlighter-rouge">&gt;=</code>, “NOT EQUAL TO” <code class="language-plaintext highlighter-rouge">!=</code><li>Control flow such as <code class="language-plaintext highlighter-rouge">if</code>, <code class="language-plaintext highlighter-rouge">else if</code>, <code class="language-plaintext highlighter-rouge">else</code>, <code class="language-plaintext highlighter-rouge">for</code>, and <code class="language-plaintext highlighter-rouge">while</code><li>Using built-in functions, such as <code class="language-plaintext highlighter-rouge">print</code>, <code class="language-plaintext highlighter-rouge">tolower</code>, <code class="language-plaintext highlighter-rouge">toupper</code>, <code class="language-plaintext highlighter-rouge">return</code>, <code class="language-plaintext highlighter-rouge">sub</code>, <code class="language-plaintext highlighter-rouge">length</code>, <code class="language-plaintext highlighter-rouge">split</code>, <code class="language-plaintext highlighter-rouge">exit</code> and <code class="language-plaintext highlighter-rouge">delete</code>.<li>Regular expressions</ul><p>We will take a further look into some of these today, and you will likely encounter many more later in the course. Make sure that you are familiar with the ones used in the lab exercises, as these are much more likely to be used in exam questions. <br /></p><h3 id="built-in-variables">Built-in variables</h3><p>AWK comes with many built-in variables, which are already defined and ready to use without any setup.</p><h4 id="nf"><strong><em>NF</em></strong></h4><p>The <code class="language-plaintext highlighter-rouge">NF</code> variable represents the number of fields in the current input line (record/row). By default, each field is separated by a space, but it can be specified with the <code class="language-plaintext highlighter-rouge">FS</code> variable.</p><div class="language-shell highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">echo</span> <span class="nt">-e</span> <span class="s2">"En To</span><span class="se">\n</span><span class="s2">En To Tre</span><span class="se">\n</span><span class="s2">En To Tre Fire"</span> | <span class="nb">awk</span> <span class="s1">'NF &gt; 2'</span>
</pre></table></code></div></div><p>This gives the following result: <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/lab-post-04/NF-variable.png" alt="Using the NF variable" class="normal" /></p><h4 id="nr"><strong><em>NR</em></strong></h4><p>The <code class="language-plaintext highlighter-rouge">NR</code> variable represents the index number of the current input line (record/row).</p><div class="language-shell highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="nb">echo</span> <span class="nt">-e</span> <span class="s2">"Two roads diverged in a yellow wood,
And sorry I could not travel both
And be one traveler, long I stood
And looked down one as far as I could
To where it bent in the undergrowth; "</span> | <span class="nb">awk</span> <span class="s1">'NR == 1'</span>
</pre></table></code></div></div><p>In this example, the newlines are denoted with pressing the <code class="language-plaintext highlighter-rouge">Enter</code> key, so you can’t see them in the terminal. But they are there, and the field separator still knows what to do. Here, I specify that I want to return the first line in the poem:</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/lab-post-04/using-NR.png" alt="Using the NR variable" class="normal" /></p><h4 id="fs"><strong><em>FS</em></strong></h4><p>The <code class="language-plaintext highlighter-rouge">FS</code> variable represents the input field separator and its default value is the space <code class="language-plaintext highlighter-rouge">" "</code>. It works very similarly to the <code class="language-plaintext highlighter-rouge">-F</code> option. Here’s an example:</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/lab-post-04/FS-variable.png" alt="Using the FS variable" class="normal" /></p><h3 id="built-in-functions">Built-in functions</h3><p><code class="language-plaintext highlighter-rouge">awk</code> comes with many built-in functions and variables which are ready to go. You should already be familiar with <code class="language-plaintext highlighter-rouge">tolower</code>, which converts an input string to lower case.</p><h4 id="print-and-printf"><strong><em>print</em></strong> and <strong><em>printf</em></strong></h4><p>So far, we’ve mainly used <code class="language-plaintext highlighter-rouge">print</code> which just prints the (matched) input string to the terminal. We can give <code class="language-plaintext highlighter-rouge">print</code> a string argument directly, and also combine it with using fields, like this:</p><pre><code class="language-AWK">awk '{ print "The total pay for ", $1, " is ", $2 * $3, "\n" }' wages.txt
</code></pre><p>Take note that string arguments are denoted with “double quotes”. We can also accomplish the same thing more elegantly with the formatted print, <code class="language-plaintext highlighter-rouge">printf</code>:</p><pre><code class="language-AWK">awk '{ printf("The total pay for %s is %.2f kroner \n", $1, $2 * $3) }' wages.txt
</code></pre><p>Here we need to give <code class="language-plaintext highlighter-rouge">printf</code> the entire expression as an argument enclosed in parentheses. We also need to specify that we want a new line <code class="language-plaintext highlighter-rouge">\n</code> character at the end of each line.</p><h4 id="length"><strong><em>length</em></strong></h4><p>We can print the lines for employees with a name longer than 6 characters like this:</p><pre><code class="language-AWK">awk 'length($1) &gt; 6' wages.txt
</code></pre><h4 id="split"><strong><em>split</em></strong></h4><p>The <code class="language-plaintext highlighter-rouge">split</code> function takes a string as input and splits it into fields using a regular expression as field separator. If the regex is emitted, the normal field separator is used. The split function takes three arguments: <code class="language-plaintext highlighter-rouge">str</code>, an array <code class="language-plaintext highlighter-rouge">arr</code> and an optional regular expression <code class="language-plaintext highlighter-rouge">regex</code>: <code class="language-plaintext highlighter-rouge">split(str, arr, ",")</code>. This will split the string where a comma occurs, and save the result in an array. We can then print the array to the terminal, like this:</p><pre><code class="language-AWK">awk 'BEGIN {
   str = "en,to,tre,fire,fem"
   split(str, arr, ",")
   print "Array contains following values"

   for (i in arr) {
      print arr[i]
   }
}'
</code></pre><h3 id="options">Options</h3><p>The <code class="language-plaintext highlighter-rouge">awk</code> command takes options, just like <code class="language-plaintext highlighter-rouge">grep</code> or <code class="language-plaintext highlighter-rouge">sed</code> or most other UNIX commands. Here are the two most important ones, but remember that you can view all of them with <code class="language-plaintext highlighter-rouge">man awk</code>.</p><h4 id="awk--f"><strong><em>awk -f</em></strong></h4><p>The <code class="language-plaintext highlighter-rouge">-f</code> option tells <code class="language-plaintext highlighter-rouge">awk</code> that it should execute the code from an AWK script/file.</p><h4 id="awk--f-1"><strong><em>awk -F</em></strong></h4><p>The <code class="language-plaintext highlighter-rouge">-F</code> option is the “field separator string” which sets the <code class="language-plaintext highlighter-rouge">FS</code> variable. It tells <code class="language-plaintext highlighter-rouge">awk</code> what to use as the separator. <a href="#new-FS">You’ve already seen an example</a> of how the field separator option can be changed, for instance to read comma-separated value(.csv) files. <br /></p><h3 id="awks-workflow-">AWK’s Workflow <br /></h3><p>To use AWK efficiently, you need to know the basics of workflow. When you are writing a longer AWK script, the workflow will often look like this: <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/lab-post-04/awk-workflow.png" alt="AWK Workflow" class="normal" /></p><ol><li>The BEGIN block is executed first. <code class="language-plaintext highlighter-rouge">AWK BEGIN {awk-commands} </code><li>The BODY block, or MIDDLE block, is executed for every input field / every input line. <code class="language-plaintext highlighter-rouge">AWK /pattern/ {awk-commands} </code><li>The END block is executed last. Similarly to the BEGIN block, it executes only once. <code class="language-plaintext highlighter-rouge">AWK END {awk-commands} </code></ol><p>Here’s a simple example: <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/lab-post-04/workflow-example.png" alt="AWK Workflow example" class="normal" /> <em>A simple AWK Workflow example</em></p><p>The BEGIN block is a great place to set variables, communicate with the user running the script, or to set ‘columns’ when you want the output of the script to look like a table. The END block is good for returning the end result of whatever you were doing in the main block, especially if you are iterating (looping) over something.</p><p>Here’s a new example, this time implemented as a script.</p><div class="language-shell highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="c">#!/usr/bin/env bash</span>
<span class="c">#filename: employee_count.sh</span>

<span class="nb">awk</span> <span class="s1">'BEGIN {print "Starting...";
            n_employees = 0}

     {n_employees = n_employees + 1}

     END { printf("There are %d employees in the company.\n", n_employees);
          print "Program terminated. Have a nice day" }'</span>
</pre></table></code></div></div><p>I can execute the script like this: <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/lab-post-04/executing-employee-count.png" alt="Executing the employee count script" class="normal" /></p><p>Okay, so here’s what’s going on in <code class="language-plaintext highlighter-rouge">employee_count.sh</code>: <br /></p><ol><li>First we state that the script should be executed in the shell. This means that we also have to specify that we want to use <code class="language-plaintext highlighter-rouge">awk</code> to run the code in the script.<li>We then create a variable <code class="language-plaintext highlighter-rouge">n_employees</code> (number of employees in my business) and set it equal to 0.<li>We loop through the file, which in this case is given as input to the script when it is run in the shell. For every employee we find in the file, we increase the variable <code class="language-plaintext highlighter-rouge">n_employees</code> by 1.<li>Finally, we can print the result to the terminal in the END block. <br /></ol><p>One last thing before we go to the exercises. You can skip this part if you want, but this is something that kind of blew my mind when I first started learning AWK. <br /></p><p>This line of code is equivalent to the script above, and will give the same exact output:</p><pre><code class="language-AWK">awk '{ n_employees++ } END { printf("\nThere are %d employees in the company.\n", n_employees) }' wages.txt
</code></pre><p>Not only can you use <code class="language-plaintext highlighter-rouge">++</code> to iteratively increase the value of a variable by 1, but you actually don’t have to set the variable to begin with. You just write <code class="language-plaintext highlighter-rouge">n_employees++</code> and AWK just figures out that <code class="language-plaintext highlighter-rouge">n_employees</code> is a new variable with an integer data type, which you want to iteratively increase for every line in the input file. <br /> That’s pretty neat. <br /></p><h3 id="useful-resources">Useful resources</h3><ul><li>For reference: <a href="https://www.tutorialspoint.com/awk/awk_overview.htm">Tutorialspoint.com</a><li>For historical and introductory <a href="https://en.wikipedia.org/wiki/AWK">information about AWK</a><li>The O.G. AWK tutorial: <a href="https://archive.org/details/pdfy-MgN0H1joIoDVoIC7/mode/2up">The AWK Programming Language</a><li>Why not use AWK for… <a href="https://www.youtube.com/watch?v=8q8DHmA9puw&amp;t=308s">everything?</a></ul><hr /><h3 id="exercise-1-counting-columns-with-awk-">Exercise 1: Counting columns with Awk <br /></h3><p>Look at the example from the <a href="https://lingkurs.h.uib.no/webroot/index.php?page=scripting/countcolumns&amp;lang=en&amp;course=ling123">lecture notes</a>. The French examples <em>d’information</em> and <em>l’agriculture</em> are contractions of two words. Translate the apostrophe to a space before counting. <br /> <br /></p><h3 id="exercise-2-cutting-columns-and-numbering-lines-">Exercise 2: Cutting columns and numbering lines <br /></h3><p>Extend the script, for instance with <code class="language-plaintext highlighter-rouge">sed</code>, so that you put a period after each number. Experiment with different formats. Reverse the columns in the last example, so that the numbers come after the words. This can be done by adding <code class="language-plaintext highlighter-rouge">| awk '{ print $2 " " $1 }'</code> after the <code class="language-plaintext highlighter-rouge">nl</code> command. <br /> <br /></p><h3 id="exercise-3-reverse-dictionary-">Exercise 3: Reverse dictionary <br /></h3><p>Check the alphabetical order for a few different languages. <br /> <br /></p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/labs/'>Labs</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/awk/" class="post-tag no-text-decoration" >AWK</a> <a href="/tags/awk/" class="post-tag no-text-decoration" >awk</a> <a href="/tags/scripting/" class="post-tag no-text-decoration" >scripting</a> <a href="/tags/shell/" class="post-tag no-text-decoration" >shell</a> <a href="/tags/bash/" class="post-tag no-text-decoration" >bash</a> <a href="/tags/zsh/" class="post-tag no-text-decoration" >zsh</a> <a href="/tags/gawk/" class="post-tag no-text-decoration" >gawk</a> <a href="/tags/workflow/" class="post-tag no-text-decoration" >workflow</a> <a href="/tags/sed/" class="post-tag no-text-decoration" >sed</a> <a href="/tags/cut/" class="post-tag no-text-decoration" >cut</a> <a href="/tags/regex/" class="post-tag no-text-decoration" >regex</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Lab Session 04 - LING123 Lab Sessions&url=https://ling123labs.com/posts/Lab-Session-04/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Lab Session 04 - LING123 Lab Sessions&u=https://ling123labs.com/posts/Lab-Session-04/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Lab Session 04 - LING123 Lab Sessions&url=https://ling123labs.com/posts/Lab-Session-04/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Solutions-to-Lab-Session-13/">Solutions to Exercises from Lab Session 13</a><li><a href="/posts/Lab-Session-13/">Lab Session 13</a><li><a href="/posts/Solutions-to-Lab-Session-12/">Solutions to Exercises from Lab Session 12</a><li><a href="/posts/Solutions-to-Lab-Session-11/">Solutions to Exercises from Lab Session 11</a><li><a href="/posts/Solutions-to-Lab-Session-10/">Solutions to Exercises from Lab Session 10</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/shell/">shell</a> <a class="post-tag" href="/tags/regex/">regex</a> <a class="post-tag" href="/tags/bash/">bash</a> <a class="post-tag" href="/tags/awk/">awk</a> <a class="post-tag" href="/tags/python/">python</a> <a class="post-tag" href="/tags/zsh/">zsh</a> <a class="post-tag" href="/tags/scripting/">scripting</a> <a class="post-tag" href="/tags/html/">html</a> <a class="post-tag" href="/tags/n-grams/">n-grams</a> <a class="post-tag" href="/tags/nltk/">nltk</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/Solutions-to-Lab-Session-06/"><div class="card-body"> <span class="timeago small" > Apr 10 <i class="unloaded">2021-04-10T21:16:00+02:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Solutions to Exercises from Lab Session 06</h3><div class="text-muted small"><p> Remember to at least attempt the lab exercises by yourself before you take a peek at my proposed solutions below. The exercises to Lab Session 06 are available here. Link to relevant lecture n...</p></div></div></a></div><div class="card"> <a href="/posts/Solutions-to-Lab-Session-02/"><div class="card-body"> <span class="timeago small" > Feb 24 <i class="unloaded">2021-02-24T17:30:00+01:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Solutions to the exercises from Lab Session 02</h3><div class="text-muted small"><p> Try to solve the lab exercises yourself before you view the solutions! You can find the exercises to Lab Session 02 here. Lecture notes Disagree with my solutions to the exercises, or have s...</p></div></div></a></div><div class="card"> <a href="/posts/Solutions-to-Lab-Session-03/"><div class="card-body"> <span class="timeago small" > Mar 11 <i class="unloaded">2021-03-11T11:01:00+01:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Solutions to Exercises from Lab Session 03</h3><div class="text-muted small"><p> Here are my solutions to the exercises from lab session 03. You should try to solve the lab exercises yourself before you peek at the answers! You can find the exercises to Lab Session 03 here. ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/Solutions-to-Lab-Session-01/" class="btn btn-outline-primary" prompt="Older"><p>Solutions to the exercises from Lab Session 01</p></a> <a href="/posts/Some-notes-on-terminology-and-shell-environments/" class="btn btn-outline-primary" prompt="Newer"><p>Notes on terminology and shell environments</p></a></div><div id="disqus" class="pt-2 pb-2"><p class="text-center text-muted small pb-5"> Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script src="/assets/js/lib/jquery.disqusloader.min.js"></script> <script> const options = { scriptUrl: '//https-sebastianrokholt-github-io-ling123labs.disqus.com/embed.js', disqusConfig: function() { this.page.title = 'Lab Session 04'; this.page.url = 'https://ling123labs.com/posts/Lab-Session-04/'; this.page.identifier = '/posts/Lab-Session-04/'; } }; $.disqusLoader('#disqus', options); </script></div></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script> <script type="text/javascript"> const imgs = document.querySelectorAll('.post-content img'); const observer = lozad(imgs); observer.observe(); </script><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2021 <a href="https://twitter.com/username">Sebastian Einar Røkholt</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author."> Some rights reserved. </span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/shell/">shell</a> <a class="post-tag" href="/tags/regex/">regex</a> <a class="post-tag" href="/tags/bash/">bash</a> <a class="post-tag" href="/tags/awk/">awk</a> <a class="post-tag" href="/tags/python/">python</a> <a class="post-tag" href="/tags/zsh/">zsh</a> <a class="post-tag" href="/tags/scripting/">scripting</a> <a class="post-tag" href="/tags/html/">html</a> <a class="post-tag" href="/tags/n-grams/">n grams</a> <a class="post-tag" href="/tags/nltk/">nltk</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://ling123labs.com{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
