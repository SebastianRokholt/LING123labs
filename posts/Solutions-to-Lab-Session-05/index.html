<!DOCTYPE html><html lang="en-US" mode="light" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="pv-cache-enabled" content="false"><meta name="generator" content="Jekyll v4.2.0" /><meta property="og:title" content="Solutions to Exercises from Lab Session 05" /><meta name="author" content="Sebastian Einar Røkholt" /><meta property="og:locale" content="en_US" /><meta name="description" content="Remember to at least attempt the lab exercises by yourself before you take a peek at my proposed solutions below. The exercises to Lab Session 05 are available here. Link to relevant lecture notes" /><meta property="og:description" content="Remember to at least attempt the lab exercises by yourself before you take a peek at my proposed solutions below. The exercises to Lab Session 05 are available here. Link to relevant lecture notes" /><link rel="canonical" href="https://ling123labs.com/posts/Solutions-to-Lab-Session-05/" /><meta property="og:url" content="https://ling123labs.com/posts/Solutions-to-Lab-Session-05/" /><meta property="og:site_name" content="LING123 Lab Sessions" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-03-24T20:16:00+01:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Solutions to Exercises from Lab Session 05" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"author":{"@type":"Person","name":"Sebastian Einar Røkholt"},"headline":"Solutions to Exercises from Lab Session 05","dateModified":"2021-04-16T20:07:48+02:00","datePublished":"2021-03-24T20:16:00+01:00","description":"Remember to at least attempt the lab exercises by yourself before you take a peek at my proposed solutions below. The exercises to Lab Session 05 are available here. Link to relevant lecture notes","url":"https://ling123labs.com/posts/Solutions-to-Lab-Session-05/","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://ling123labs.com/posts/Solutions-to-Lab-Session-05/"},"@context":"https://schema.org"}</script><title>Solutions to Exercises from Lab Session 05 | LING123 Lab Sessions</title><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="https://www.uib.no/sites/w3.uib.no/files/styles/large/public/w2/ui/uib_logo_1.jpg?itok=LjwYKlGn" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">LING123 Lab Sessions</a></div><div class="site-subtitle font-italic">Educational rescources for the LING123 lab sessions, <br>spring 2021</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://www.linkedin.com/in/sebastianrokholt/" aria-label="linkedin" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <a href="https://github.com/SebastianRokholt" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['sebastian.rokholt','student.uib.no'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>Solutions to Exercises from Lab Session 05</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Solutions to Exercises from Lab Session 05</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Wed, Mar 24, 2021, 8:16 PM +0100" > Mar 24 <i class="unloaded">2021-03-24T20:16:00+01:00</i> </span> by <span class="author"> Sebastian Einar Røkholt </span></div><div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Fri, Apr 16, 2021, 8:07 PM +0200" > Apr 16 <i class="unloaded">2021-04-16T20:07:48+02:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2596 words">14 min</span></div></div><div class="post-content"><p>Remember to at least attempt the lab exercises by yourself before you take a peek at my proposed solutions below. <br /> The exercises to Lab Session 05 are available <a href="https://ling123labs.com/posts/Lab-Session-05/">here</a>. <br /></p><blockquote><p><strong><em><a href="https://lingkurs.h.uib.no/webroot/index.php?page=scripting/palindromes&amp;lang=en&amp;course=ling123">Link to relevant lecture notes</a></em></strong></p></blockquote><p><em>Disagree with my solutions, or have something to add? <br /> Leave a <a href="#post-extend-wrapper">comment</a>!</em> <br /></p><hr /><h3 id="exercise-1-palindromes-with-awk-">Exercise 1: Palindromes with Awk <br /></h3><p><em>a) Apply the <a href="https://lingkurs.h.uib.no/webroot/index.php?page=scripting/palindromes&amp;lang=en&amp;course=ling123">palindromes script</a> to a large word list in order to find as many palindrome words as possible in a language. Many systems contain a dictionary file /usr/share/dict/words. Alternatively, you can download <a href="http://wiki.puzzlers.org/pub/wordlists/unixdict.txt">The Unix Dictionary</a>.</em> <br /></p><p>Using Ubuntu, I downloaded the Unix Dictionary from the web and saved it to a file <code class="language-plaintext highlighter-rouge">unixdict.txt</code>. I then gave the file as input to the script <code class="language-plaintext highlighter-rouge">palindromes.sh</code>:</p><div class="language-shell highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="c">#/usr/bin/env bash</span>
<span class="c"># palindromes.sh</span>
rev <span class="nv">$1</span> | <span class="nb">paste</span> <span class="nv">$1</span> - | <span class="nb">awk</span> <span class="nt">-F</span> <span class="s1">'\t'</span> <span class="s1">'{if ($1 == $2) print $1}'</span>
</pre></table></code></div></div><div class="language-shell highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre><td class="rouge-code"><pre><span class="c"># You can specify how many lines you want "head" to show with the flag "--lines=number"</span>
<span class="nv">$ </span><span class="nb">source </span>palindromes.sh unixdict.txt | <span class="nb">head</span> <span class="nt">--lines</span><span class="o">=</span>20
a
aaa
aba
ababa
ada
ala
ama
ana
anna
b
bib
bob
bub
c
cdc
civic
d
dad
deed
did
</pre></table></code></div></div><p><br /></p><p><em>b) The script selects all strict palindromes, but not phrase palindromes, such as “Anne var i Ravenna”. Extend the script so that the punctuation, spaces and capitalization are ignored.</em> <br /></p><p>This exercise can be solved by creating three columns/fields:</p><ol><li>the original string<li>the normalized string<li>the reversed normalized string. Then, if fields 2 and 3 are equal, field 1 is returned. <br /></ol><p>The <code class="language-plaintext highlighter-rouge">paste</code> command can take three arguments, like this: <code class="language-plaintext highlighter-rouge">paste $1 $1 -</code>. If you pass this to <code class="language-plaintext highlighter-rouge">awk</code>, you’ll have three fields (columns) to work with. <br /></p><p>You can also use the AWK function <a href="https://www.gnu.org/software/gawk/manual/html_node/String-Functions.html"><code class="language-plaintext highlighter-rouge">gsub</code></a> to perform string substitutions in <code class="language-plaintext highlighter-rouge">awk</code>, so we don’t have to use <code class="language-plaintext highlighter-rouge">sed</code> here.</p><p>This is one way to do it, though I made it so that the script actually prints the result for each word out to the terminal (“word” is NOT a palindrome / “word” is NOT a palindrome), which can be kind of annoying, though useful to see if the script is working properly. You should attempt to create your own version which only prints the palindromes and ignores the rest!</p><blockquote><p>PS: Comments in the code are denoted with <code class="language-plaintext highlighter-rouge">#</code>. Everything after a <code class="language-plaintext highlighter-rouge">#</code> on the same line is a comment. The comments are there to explain what the code is doing. Read them closely, and try to make sure that you understand what the code is doing at each step!</p></blockquote><div class="language-shell highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre><td class="rouge-code"><pre><span class="c">#!/usr/bin/env bash</span>
<span class="c"># palindromes-improved.sh</span>

<span class="c"># Reverse the file contents, then paste the result next to two columns of the original words.</span>
<span class="c"># Pipe this into awk, using tab as the field separator.</span>
rev <span class="nv">$1</span> | <span class="nb">paste</span> <span class="nv">$1</span> <span class="nv">$1</span> - | <span class="nb">awk</span> <span class="nt">-F</span><span class="s1">'\t'</span> <span class="s1">'{
  # Substitution on field 2 and 3 with gsub()
  # to get a normalized version of the regular (field 2) and reversed (field 3) strings
  gsub(/[^[:alnum:]]/, "", $2);
  gsub(/[^[:alnum:]]/, "", $3);

  # Check whether the normalized string (field 2) is equal to the reversed normalized string (field 3).
  if (tolower($2)==tolower($3)) {
      # If yes, then we print out the result for the original string, field 1, which has not been normalized
      printf("  \"%s\" is a palindrome \n", $1)
     }

  # If the normalized string (field 2) is NOT equal to the reversed normalized string (field 3),
  # then we print the result for this as well
  else {
      printf("  \"%s\" is NOT a palindrome \n", $1)
    }
}'</span>
</pre></table></code></div></div><p>I created a test file <code class="language-plaintext highlighter-rouge">test_palindromes.txt</code> with some palindromes, both strict palindromes and palindromes with typographical characters such as exclamation points and commas. There are also a few words which aren’t palindromes at all.</p><div class="language-text highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre><td class="rouge-code"><pre>palindrome
02.02.2020
0202-2020
radar
level
regninger
step on no pets
Anne var i Ravenna.
end
Agnes i senga
Høyspent
accent
Wow Bob, WOW!
Bad dab!
madam
not a palindrome
sentence
words and words
</pre></table></code></div></div><p>Running the <code class="language-plaintext highlighter-rouge">palindromes-improved.sh</code> script on the test file <code class="language-plaintext highlighter-rouge">test_palindromes.txt</code> gives us the following:</p><div class="language-shell highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">source </span>palindromes-improved.sh test_palindromes.txt
  <span class="s2">"palindrome"</span> is NOT a palindrome
  <span class="s2">"02.02.2020"</span> is a palindrome
  <span class="s2">"0202-2020"</span> is a palindrome
  <span class="s2">"radar"</span> is a palindrome
  <span class="s2">"level"</span> is a palindrome
  <span class="s2">"regninger"</span> is a palindrome
  <span class="s2">"step on no pets"</span> is a palindrome
  <span class="s2">"Anne var i Ravenna."</span> is a palindrome
  <span class="s2">"end"</span> is NOT a palindrome
  <span class="s2">"Agnes i senga"</span> is a palindrome
  <span class="s2">"Høyspent "</span> is NOT a palindrome
  <span class="s2">"accent "</span> is NOT a palindrome
  <span class="s2">"Wow Bob, WOW!"</span> is a palindrome
  <span class="s2">"Bad dab!"</span> is a palindrome
  <span class="s2">"madam"</span> is a palindrome
  <span class="s2">"not a palindrome"</span> is NOT a palindrome
  <span class="s2">"sentence"</span> is NOT a palindrome
  <span class="s2">"words and words"</span> is NOT a palindrome
</pre></table></code></div></div><p><br /> <br /></p><p><em>c) Create a script that finds all words in a file that are reverse anagrams but not palindromes, for instance, “rail” and “liar”.</em></p><p>For this exercise we will need to use AWK arrays, also known as “associative arrays”. The associative array in AWK is a data structure that works and looks a lot like the “dictionary” data structure in Python. <br /> If you are unfamiliar with using AWK arrays, you should take a look at <a href="https://www.tutorialspoint.com/awk/awk_arrays.htm">this tutorial</a> before progressing further. <br /></p><p>We can solve the problem by applying our knowledge of <code class="language-plaintext highlighter-rouge">paste</code> and AWK arrays. Look at the comments (indicated with <code class="language-plaintext highlighter-rouge">#</code>) in the script, which try to explain what the code does. <br /></p><div class="language-shell highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre><td class="rouge-code"><pre><span class="c">#!/usr/bin/env bash</span>
<span class="c"># find-anagrams.sh</span>

<span class="c"># Give awk the original and reversed words as input. Set awks's field seperator to tab ('\t')</span>
rev <span class="nv">$1</span> | <span class="nb">paste</span> <span class="nv">$1</span> - | <span class="nb">awk</span> <span class="nt">-F</span><span class="s1">'\t'</span> <span class="s1">'{
    # If the word is not a palindrome
    if ($1 != $2)
        # Lowercase both the reversed and original words, and add them to an associative array.
        # The original word is the index, the reversed word is the value.
        words[tolower($1)] = tolower($2);
}

# Loop through everything again, but this time check if each word has an anagram stored in the array.
{
     for (i in words)
          if (words[i] == tolower($1))
          # If yes, there is another word in the file which is the reversible anagram.
          # Print these words out to the terminal
                printf("%s &lt;---&gt; %s \n%s &lt;---&gt; %s\n", $1, i, i, $1);
}'</span>
</pre></table></code></div></div><p>If you don’t recognize the syntax or a function that is being used here or in exercise <em>1b</em>, you can go back to the <a href="https://ling123labs.com/posts/Lab-Session-04/">lab session notes on AWK</a> or look online and see if you can find some examples and explanations of the specifics in order to understand the whole program better. You really just need to try to use AWK yourself, write some simple programs, do some more exercises, and work from there. <br /></p><p>If you can understand the AWK code above, you are doing really well! If not… No worries - you’ll get there! <br /></p><p>Luckily, for this course, the programming doesn’t really get more complicated than this :)</p><p><br /> <br /></p><h3 id="exercise-2-character-to-word-ratio-">Exercise 2: Character to word ratio <br /></h3><p><em>a) Look at the script in the <a href="https://lingkurs.h.uib.no/webroot/index.php?page=scripting/charwordratio&amp;lang=en&amp;course=ling123">lecture notes</a>. The script counts all characters, including spaces, punctuation, and so on, even if they are not part of words. Assuming that there is about one space per word, subtract 1 from the ratio to come closer to the average word length.</em> <br /></p><p>We need to subtract one from the calculated ratio, so we simply add <code class="language-plaintext highlighter-rouge">- 1</code> to that part of the script. Remember that this script only works in the Z-shell, and therefore needs to be run with <code class="language-plaintext highlighter-rouge">zsh</code>.</p><div class="language-shell highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="c">#!/usr/bin/env zsh</span>
<span class="c"># charwordratio.sh</span>
                                                                                                                        <span class="nv">nrchars</span><span class="o">=</span><span class="si">$(</span><span class="nb">wc</span> <span class="nt">-c</span> <span class="nv">$1</span> | <span class="nb">awk</span> <span class="s1">'{print $1}'</span><span class="si">)</span>
<span class="nv">nrwords</span><span class="o">=</span><span class="si">$(</span><span class="nb">wc</span> <span class="nt">-w</span> <span class="nv">$1</span> | <span class="nb">awk</span> <span class="s1">'{print $1}'</span><span class="si">)</span>

<span class="c"># Calculate the ratio, subtract 1 to get closer to the average word length</span>
<span class="o">((</span>ratio <span class="o">=</span> <span class="nv">$nrchars</span>/<span class="nv">$nrwords</span>.0 - 1<span class="o">))</span>

<span class="nb">printf</span> <span class="s2">"The ratio of characters to words in </span><span class="nv">$1</span><span class="s2"> is %.2f.</span><span class="se">\n</span><span class="s2">"</span> <span class="nv">$ratio</span>

</pre></table></code></div></div><p><br /></p><p><em>b) To be even more exact, tokenize the text file first and then compute the character-to-word ratio.</em> <br /></p><p>We already know how to tokenize, and we already have a script for computing the character-to-word ratio. So we simply tokenize the file first and save the output to a file <code class="language-plaintext highlighter-rouge">lofoten-tokenized.txt</code>, and run <code class="language-plaintext highlighter-rouge">charwordratio.sh</code> with the Z-Shell interpreter <code class="language-plaintext highlighter-rouge">zsh</code> instead of <code class="language-plaintext highlighter-rouge">source</code> (which uses <code class="language-plaintext highlighter-rouge">bash</code> on my system. This might be different on yours. On MacOS, <code class="language-plaintext highlighter-rouge">zsh</code> is usually set as the default).</p><div class="language-shell highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">source </span>tokenize.sh lofoten.txt <span class="o">&gt;</span> lofoten-tokenized.txt
<span class="nv">$ </span><span class="nb">head </span>lofoten-tokenized.txt
lofoten
has
an
abundant
selection
of
birds
we
meet
birds
<span class="nv">$ </span>zsh charwordratio.sh lofoten-tokenized.txt
The ratio of characters to words <span class="k">in </span>lofoten-tokenized.txt is 4.86.
</pre></table></code></div></div><p><br /></p><p><em>c) Print more information, such as the number of words and characters.</em> <br /></p><p>We’ve already calculated the number of words and characters in order to calculate the ratio, so the only thing we need to do is to print out these variables to the terminal along with some text. In this case I use <code class="language-plaintext highlighter-rouge">printf</code> (formatted print), but you could also use <code class="language-plaintext highlighter-rouge">echo</code>.</p><div class="language-shell highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="c">#!/usr/bin/env zsh</span>

<span class="nv">nrchars</span><span class="o">=</span><span class="si">$(</span><span class="nb">tr</span> <span class="nt">-cs</span> <span class="s1">'a-zA-Z'</span> &lt; <span class="nv">$1</span> | <span class="nb">wc</span> <span class="nt">-c</span> | <span class="nb">awk</span> <span class="s1">'{print $1}'</span><span class="si">)</span>
<span class="nv">nrwords</span><span class="o">=</span><span class="si">$(</span><span class="nb">tr</span> <span class="nt">-cs</span> <span class="s1">'a-zA-Z'</span> &lt; <span class="nv">$1</span> | <span class="nb">wc</span> <span class="nt">-w</span> | <span class="nb">awk</span> <span class="s1">'{print $1}'</span><span class="si">)</span>
<span class="o">((</span>char_ratio <span class="o">=</span> <span class="nv">$nrchars</span>/<span class="nv">$nrwords</span>.0<span class="o">))</span>

<span class="nb">printf</span> <span class="s2">"There are %i words in </span><span class="nv">$1</span><span class="s2">.</span><span class="se">\n</span><span class="s2">"</span> <span class="nv">$nrwords</span>
<span class="nb">printf</span> <span class="s2">"There are %i characters, and the ratio of characters to words is %.2f.</span><span class="se">\n</span><span class="s2">"</span> <span class="nv">$nrchars</span> <span class="nv">$char_ratio</span>
</pre></table></code></div></div><div class="language-shell highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="nv">$ </span>zsh charwordratio-improved.sh lofoten-tokenized.txt
There are 111 words <span class="k">in </span>lofoten-tokenized.txt.
There are 651 characters, and the ratio of characters to words is 5.86.
</pre></table></code></div></div><p><br /></p><p><em>d) Consider a way to compute the ratio of words to sentences. This is more difficult because one needs to find sentence boundaries.</em> <br /></p><p>A very simple approach is to calculate the number of sentences by “grepping” (which means to use <code class="language-plaintext highlighter-rouge">grep</code> or <code class="language-plaintext highlighter-rouge">egrep</code> to retrieve) all punctuation, exclamation and question marks (and dashes, if we are working with dialogue-heavy texts like books) and counting them with <code class="language-plaintext highlighter-rouge">wc -l</code>. It’s not perfect, but it’ll get you quite close to the real answer.</p><div class="language-shell highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="c">#!/usr/bin/env zsh</span>
<span class="c"># wordsent-ratio.sh</span>

<span class="nv">nrwords</span><span class="o">=</span><span class="si">$(</span><span class="nb">tr</span> <span class="nt">-cs</span> <span class="s1">'a-zA-Z'</span> <span class="s1">'\n'</span> &lt; <span class="nv">$1</span> | <span class="nb">wc</span> <span class="nt">-l</span> | <span class="nb">awk</span> <span class="s1">'{print $1}'</span><span class="si">)</span>
<span class="nv">nrsentences</span><span class="o">=</span><span class="si">$(</span>egrep <span class="nt">-o</span> <span class="s1">'(\.|\?|\!)'</span> <span class="nv">$1</span> | <span class="nb">wc</span> <span class="nt">-l</span><span class="si">)</span>
<span class="o">((</span>sw_ratio <span class="o">=</span> <span class="nv">$nrwords</span>/<span class="nv">$nrsentences</span>.0<span class="o">))</span>

<span class="nb">printf</span> <span class="s2">"The ratio of words to sentences is %.2f.</span><span class="se">\n</span><span class="s2">"</span> <span class="nv">$sw_ratio</span>
</pre></table></code></div></div><div class="language-shell highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nv">$ </span>zsh word-sentence-ratio.sh ../lofoten.txt
The ratio of words to sentences is 18.17.
</pre></table></code></div></div><p>In truth, detecting sentence boundaries is a notoriously difficult task in natural language processing, because there are so many different edge cases. There are a few libraries in Python which provide functions for sentence detection, but even the most advanced of these struggle with cases such as “5 P.M. eastern time” or “Kahoot! is awesome!”. Most often, we have to tailor code from an existing Python library to the specific text or problem we are working with in order to achieve the best results. Sometimes, we have to settle for a solution that is “good enough”!</p><p><br /> <br /></p><h3 id="exercise-3-character-frequencies-with-awk-">Exercise 3: Character frequencies with Awk <br /></h3><p><em>a) Try also <code class="language-plaintext highlighter-rouge">source encrypt.sh &lt; chess.txt | source charfreq.sh | head</code>. This will give you a clue about which cipher letter represents the most frequent characters.</em> <br /></p><div class="language-shell highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">source </span>encrypt.sh &lt; chess.txt | <span class="nb">source </span>charfreq.sh | <span class="nb">head
</span>79
52 t
36 z
29 k
25 q
22 s
22 o
22 l
22 f
18 u
</pre></table></code></div></div><p>If we compare the result to the output from running <code class="language-plaintext highlighter-rouge">charfreq.sh</code> on the unencrypted file, we get this:</p><div class="language-shell highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">source </span>charfreq.sh &lt; ../chess.txt | <span class="nb">head
</span>79
52 e
36 t
29 r
25 a
22 s
22 n
22 l
22 i
18 g
</pre></table></code></div></div><p>We can then compare the encrypted character frequency with the unencrypted frequencies to decipher the encrypted text. Think about this: How could you use these methods to decrypt a text (which is encrypted with this simple character-to-character shift cipher) when you don’t have the original unencrypted version?</p><blockquote><p>Hint: You might need a corpus.</p></blockquote><p><br /></p><p><em>b) Extend the script from the <a href="https://lingkurs.h.uib.no/webroot/index.php?page=scripting/charfreq&amp;lang=en&amp;course=ling123">lecture notes</a> by first changing all uppercase to lowercase letters.</em> <br /></p><p>We can use the <code class="language-plaintext highlighter-rouge">tolower()</code>-function to lowercase the characters before we count them.</p><div class="language-shell highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="c">#!/usr/bin/env bash</span>
<span class="c"># charfreq.sh</span>

<span class="nb">awk</span> <span class="s1">'
  BEGIN { FS="" }
  { for (field=1; field &lt;= NF; field++) {
    freq[tolower($field)]++ }
  }
  END { for (char in freq)
        { print freq[char], char } }'</span> |
<span class="nb">sort</span> <span class="nt">-nr</span>
</pre></table></code></div></div><p><br /> <br /></p><h3 id="exercise-4-an-interesting-regular-expressions-problem">Exercise 4: An interesting regular expressions problem</h3><p><em>Create a regular expression which matches all <a href="https://www.britannica.com/topic/Roman-numeral">roman numerals</a>. It’s okay if your expression also matches an empty string.</em> <br /></p><p>Before solving this problem, we need to familiarize ourselves with how Roman numerals work. The syntax is quite different from the decimal system, but there are still patterns and structures we can exploit when we want to create a regular expression. It is therefore important to look at all of the different variations of numerals, and try to figure out how each variation can be captured in a single expression. <br /></p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/answers-05/roman-numerals-explanation.png" alt="A picture explaining the value of each roman numeral" class="normal" /> <em>An explanation of the decimal values for each of the Roman numerals</em></p><p>I also posted a sample file <a href="https://mitt.uib.no/files/3148777/download?download_frd=1"><code class="language-plaintext highlighter-rouge">roman_numerals.txt</code></a> with a lot of different numbers written in Roman numerals. <br /></p><p>The challenging part about this exercise is that each letter used in a Roman numeral (<code class="language-plaintext highlighter-rouge">M</code>) is optional, so there isn’t a single Roman numeral that always occurs. However, there is a very specific ordering of the numerals which is allowed. For example, letters that are of higher value (like <code class="language-plaintext highlighter-rouge">M</code> or <code class="language-plaintext highlighter-rouge">C</code>) need to occur before letters of lower value. The exeption is of course the <code class="language-plaintext highlighter-rouge">I</code>-deduction-rule, where <code class="language-plaintext highlighter-rouge">IX</code> = 9 and <code class="language-plaintext highlighter-rouge">IV</code> = 4. We therefore need to use a series of optional groups in order to capture the different variations. <br /></p><p>There are a few different versions which will work, but here’s one of them:</p><pre><code class="language-regexp">^M*(C[MD]|D?C{0,3})(X[CL]|L?X{0,3})(I[XV]|V?I{0,3})$
</code></pre><p>Explanation of the characters in the expression:</p><ul><li>The initial <code class="language-plaintext highlighter-rouge">^</code>: The word/number to be match must start with the following<li><code class="language-plaintext highlighter-rouge">M*</code>: zero or more occurences of a single “M”, which has a value of 1000<li><code class="language-plaintext highlighter-rouge">(C[MD]|D?C{0,3})</code>: The first optional group to capture the range 100 - infinity, which either:<ul><li>begins with a “C”, followed by a single optional “M” (<code class="language-plaintext highlighter-rouge">CM</code> = 900) or “D” (<code class="language-plaintext highlighter-rouge">CD</code> = 400), or:<li>begins with 1 or 0 “D”s, followed by 0-3 occurences of “C”. (<code class="language-plaintext highlighter-rouge">DCCC</code> = 800)</ul><li><code class="language-plaintext highlighter-rouge">(X[CL]|L?X{0,3})</code>: The second optional group, for the range 10 - 99, which either:<ul><li>begins with a single “X”, followed by an optional “C” or “L”- begins with 0 or 1 “L”, followed by 0-3 occurrences of “X”</ul><li><code class="language-plaintext highlighter-rouge">(I[XV]|V?I{0,3})</code>: The last optional group to capture the range 1 - 9, which either:<ul><li>begins with a single “I”, followed by a single “X” (<code class="language-plaintext highlighter-rouge">IX</code> = 9) or a single “V” (<code class="language-plaintext highlighter-rouge">IV</code> = 4), or:<li>begins with 0 or 1 occurrences of “V”, followed by 0-3 “I”s.</ul><li>The final <code class="language-plaintext highlighter-rouge">$</code>: The word/number to be matched must end here. For example there can be a whitespace or newline.</ul><p>As you can see, it’s not really possible to create a regular expression for roman numerals which doesn’t match the empty string. Well, at least not that I know of. Make sure to tell me if you figure it out… ;) <br /></p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/solutions-to-lab-exercises/'>Solutions to Lab Exercises</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/shell/" class="post-tag no-text-decoration" >shell</a> <a href="/tags/bash/" class="post-tag no-text-decoration" >bash</a> <a href="/tags/zsh/" class="post-tag no-text-decoration" >zsh</a> <a href="/tags/awk/" class="post-tag no-text-decoration" >awk</a> <a href="/tags/sed/" class="post-tag no-text-decoration" >sed</a> <a href="/tags/frequency/" class="post-tag no-text-decoration" >frequency</a> <a href="/tags/alphabet/" class="post-tag no-text-decoration" >alphabet</a> <a href="/tags/alphabets/" class="post-tag no-text-decoration" >alphabets</a> <a href="/tags/ordering/" class="post-tag no-text-decoration" >ordering</a> <a href="/tags/regex/" class="post-tag no-text-decoration" >regex</a> <a href="/tags/regular-expressions/" class="post-tag no-text-decoration" >regular_expressions</a> <a href="/tags/palindrome/" class="post-tag no-text-decoration" >palindrome</a> <a href="/tags/roman/" class="post-tag no-text-decoration" >roman</a> <a href="/tags/numerals/" class="post-tag no-text-decoration" >numerals</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Solutions to Exercises from Lab Session 05 - LING123 Lab Sessions&url=https://ling123labs.com/posts/Solutions-to-Lab-Session-05/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Solutions to Exercises from Lab Session 05 - LING123 Lab Sessions&u=https://ling123labs.com/posts/Solutions-to-Lab-Session-05/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Solutions to Exercises from Lab Session 05 - LING123 Lab Sessions&url=https://ling123labs.com/posts/Solutions-to-Lab-Session-05/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Solutions-to-Lab-Session-13/">Solutions to Exercises from Lab Session 13</a><li><a href="/posts/Lab-Session-13/">Lab Session 13</a><li><a href="/posts/Solutions-to-Lab-Session-12/">Solutions to Exercises from Lab Session 12</a><li><a href="/posts/Solutions-to-Lab-Session-11/">Solutions to Exercises from Lab Session 11</a><li><a href="/posts/Solutions-to-Lab-Session-10/">Solutions to Exercises from Lab Session 10</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/shell/">shell</a> <a class="post-tag" href="/tags/regex/">regex</a> <a class="post-tag" href="/tags/bash/">bash</a> <a class="post-tag" href="/tags/awk/">awk</a> <a class="post-tag" href="/tags/python/">python</a> <a class="post-tag" href="/tags/zsh/">zsh</a> <a class="post-tag" href="/tags/scripting/">scripting</a> <a class="post-tag" href="/tags/html/">html</a> <a class="post-tag" href="/tags/n-grams/">n-grams</a> <a class="post-tag" href="/tags/nltk/">nltk</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/Solutions-to-Lab-Session-04/"><div class="card-body"> <span class="timeago small" > Mar 11 <i class="unloaded">2021-03-11T14:16:00+01:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Solutions to Exercises from Lab Session 04</h3><div class="text-muted small"><p> Here are my solutions to the exercises from lab session 04. You should try to solve the lab exercises yourself before you peek at the answers! The exercises to Lab Session 04 are available here. ...</p></div></div></a></div><div class="card"> <a href="/posts/Lab-Session-02/"><div class="card-body"> <span class="timeago small" > Jan 27 <i class="unloaded">2021-01-27T12:00:00+01:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Lab Session 02</h3><div class="text-muted small"><p> Start by completing the exercises from Lab Session 01 if you haven’t done so already. Part 1) Regular expressions: A very very short introduction Regular expressions (“Regex”) have been around ...</p></div></div></a></div><div class="card"> <a href="/posts/Lab-Session-04/"><div class="card-body"> <span class="timeago small" > Feb 10 <i class="unloaded">2021-02-10T11:34:00+01:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Lab Session 04</h3><div class="text-muted small"><p> Welcome to Lab Session 4: An Introduction to AWK For this lab session we’re getting started with the AWK programming language! The lecture notes for lecture 4 can be found here. You should...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/Lab-Session-10/" class="btn btn-outline-primary" prompt="Older"><p>Lab Session 10</p></a> <a href="/posts/Lab-Session-11/" class="btn btn-outline-primary" prompt="Newer"><p>Lab Session 11</p></a></div><div id="disqus" class="pt-2 pb-2"><p class="text-center text-muted small pb-5"> Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script src="/assets/js/lib/jquery.disqusloader.min.js"></script> <script> const options = { scriptUrl: '//https-sebastianrokholt-github-io-ling123labs.disqus.com/embed.js', disqusConfig: function() { this.page.title = 'Solutions to Exercises from Lab Session 05'; this.page.url = 'https://ling123labs.com/posts/Solutions-to-Lab-Session-05/'; this.page.identifier = '/posts/Solutions-to-Lab-Session-05/'; } }; $.disqusLoader('#disqus', options); </script></div></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script> <script type="text/javascript"> const imgs = document.querySelectorAll('.post-content img'); const observer = lozad(imgs); observer.observe(); </script><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2021 <a href="https://twitter.com/username">Sebastian Einar Røkholt</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author."> Some rights reserved. </span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/shell/">shell</a> <a class="post-tag" href="/tags/regex/">regex</a> <a class="post-tag" href="/tags/bash/">bash</a> <a class="post-tag" href="/tags/awk/">awk</a> <a class="post-tag" href="/tags/python/">python</a> <a class="post-tag" href="/tags/zsh/">zsh</a> <a class="post-tag" href="/tags/scripting/">scripting</a> <a class="post-tag" href="/tags/html/">html</a> <a class="post-tag" href="/tags/n-grams/">n grams</a> <a class="post-tag" href="/tags/nltk/">nltk</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://ling123labs.com{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
